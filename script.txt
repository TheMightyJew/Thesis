#!/bin/bash
FNAME=$1
cd hog2-PDB-refactor/build/gmake
make -j 4 OPENGL=STUB
cd ..
cd ..
cd ..
if [ $? == 0 ]; then
	echo "line 1 -> executed"
	cd hog2-PDB-refactor/bin/release
	./bidirectional -pancake $FNAME 
	cd ..
	cd ..
	cd ..
	copyFrom="hog2-PDB-refactor/bin/release/test_results/PancakeSorting/${FNAME}.txt"
	echo "${copyFrom}"
	copyTo="python_parser/Analysis/PancakeSorting/${FNAME}.txt"
	cp "${copyFrom}" "${copyTo}"
	if [ $? == 0 ]; then
		echo "line 2 -> executed"
		cd python_parser
		python3 results_parsing.py $FNAME
		cd ..
		if [ $? == 0 ]; then
			echo "line 3 -> executed - Complete" 
		else
			echo "line 3 -> failed"
		fi
	else
		echo "line 2 -> failed"
	fi	
else
	echo "line 1 -> failed"
fi
# set script permissions using "chmod 755"
# run by using "./script.txt"
